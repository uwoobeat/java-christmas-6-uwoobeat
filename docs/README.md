# 기능 요구사항 명세

### 메뉴(Menu)

- 메뉴는 메뉴 이름과 메뉴 타입, 가격을 가진다.
    - 메뉴 타입에는 애피타이저, 메인, 디저트, 음료가 있다.
- 메뉴 정보를 변경할 수 없다.
- 메뉴 정보들이 같다면 같은 메뉴이다.

### 메뉴 팩토리(MenuFactory)

- 메뉴 팩토리는 유저가 선택 가능한 모든 메뉴를 가진다.

### 돈(Money)

- 돈은 금액을 가진다.
- 금액은 변경할 수 없다.
- 금액이 같다면 같은 돈이다.
- 금액은 0원 이상이어야 한다.
    - 금액이 0원 이상이 아니면 예외가 발생한다.
- 돈은 다른 돈과 더할 수 있다.
- 돈은 다른 돈과 뺄 수 있다.
- 돈은 대상 정수와 곱할 수 있다.

## 예약(Reservation)

- 예약은 예약일, 주문, 적용된 이벤트 목록, 증정품 목록, 결제정보, 이벤트배지를 가진다.
    - 적용된 이벤트 목록에서 총할인금액을 구할 수 있다.
    - 적용된 이벤트 목록에서 증정품 목록을 구할 수 있다.
    - 증정품 목록에서 총가치금액을 구할 수 있다.
- 결제정보는 총주문금액, 총할인금액, 총혜택금액, 예상결제금액을 가진다.
    - 총주문금액은 주문의 총주문금액이다.
    - 총할인금액은 적용된 이벤트 목록의 혜택금액의 합이다.
    - 총혜택금액은 총할인금액과 증정품 목록의 총가치금액의 합이다.
    - 예상결제금액은 총주문금액에서 총혜택금액을 뺀 금액이다.

## 주문(Order)

- 주문은 주문일과 주문내역의 목록을 가진다.
    - 주문일은 예약일과 같다.
- 주문의 총주문금액은 모든 주문내역의 주문금액의 합이다.
- 주문은 다음을 검증한다.
    - 전체 주문수량이 20개 이하인지 검증한다.
    - 주문내역의 주문메뉴가 중복되지 않는지 검증한다.
    - 주문내역의 주문메뉴의 메뉴타입이 음료로만 구성되어 있지 않은지 검증한다.

### 주문내역(OrderLine)

- 주문내역은 주문메뉴와 주문수량을 가진다.
    - 주문수량이 1개 이상인지 검증한다.
- 주문메뉴와 주문수량이 같다면 같은 주문내역이다.
- 주문내역의 주문금액은 주문메뉴의 가격과 주문수량을 곱한 금액이다.

## 이벤트(Event)

- 이벤트는 이벤트 이름, 이벤트 기간을 가진다.
- 이벤트에는 할인 이벤트와 증정 이벤트가 있다.
- 이벤트의 적용 가능 여부를 확인할 수 있다.
- 이벤트의 혜택금액을 확인할 수 있다.
- 총주문금액이 10,000원 이상인 경우 이벤트를 적용한다.

### 이벤트 팩토리(EventFactory)

- 이벤트 팩토리는 유저가 선택 가능한 모든 이벤트를 가진다.
- 다음 이벤트가 존재한다.
    - 크리스마스 디데이 할인
    - 평일 할인
    - 주말 할인
    - 특별 할인
    - 증정 이벤트
- 이벤트 팩토리는 모든 적용 가능한 이벤트를 반환할 수 있다.

### 이벤트 기간(EventPeriod)

- 이벤트 기간은 시작일과 종료일을 가진다.
- 이벤트 기간은 대상일이 이벤트 기간에 포함되는지 여부를 확인할 수 있다.

## 할인 이벤트(DiscountEvent)

- 할인 이벤트는 이벤트 이름, 이벤트 기간, 날짜 정책, 할인 정책을 가진다.
- 할인 이벤트는 이벤트 적용 가능 여부를 판정할 수 있다.
    - 이벤트 기간에 포함되는지 검증한다.
    - 날짜 정책에 따라 적용 가능한지 검증한다.
    - 총 주문금액이 10,000원 이상인지 검증한다.
- 할인 이벤트가 적용 가능하다면, 할인 정책에 의한 할인 금액을 적용한다.
- 할인 이벤트의 혜택금액은 할인 금액이다.

### 날짜 정책(DatePolicy)

- 날짜 정책은 주문일을 통해 적용 가능 여부를 판정할 수 있다.
- 날짜 정책에는 요일 정책과 지정일 정책이 있다.
    - 요일 정책 (DayOfWeekPolicy)
        - 요일 정책은 적용 기준이 되는 요일 리스트를 가진다.
        - 요일 정책은 주문일이 요일 리스트에 포함되는지로 적용 가능 여부를 판정한다.
    - 지정일 정책 (FixedDatePolicy)
        - 지정일 정책은 적용 기준이 되는 날짜 리스트를 가진다.
        - 적용 가능한 지정일 리스트에 주문일이 포함되는지로 적용 가능 여부를 판정한다.

### 날짜 정책 팩토리(DatePolicyFactory)

- 날짜 정책 팩토리는 현재 존재하는 모든 날짜 정책을 가진다.
- 다음 날짜 정책이 존재한다.
    - 요일 정책 : 평일(일~목), 주말(금~토)
    - 지정일 정책 : 달력 별표(3, 10, 17, 24, 25, 31일)

### 할인 정책(DiscountPolicy)

- 할인 정책은 주문을 통해 할인 금액을 계산할 수 있다.
- 할인 정책에는 메뉴 할인 정책과 주문 할인 정책이 있다.
    - 메뉴타입 할인 정책 (MenuTypeDiscountPolicy)
        - 메뉴타입 정책은 지정된 메뉴타입에 대하여 할인을 적용한다.
        - 메뉴타입 정책은 적용 기준이 되는 단일 메뉴타입을 가진다.
        - 메뉴타입 정책은 기준 단위 할인금액을 가진다.
        - 메뉴타입 정책은 (적용 기준 메뉴타입의 총주문수량) * (기준 할인금액)만큼 할인금액을 결정한다.
    - 고정 할인 정책 (FixedDiscountPolicy)
        - 주문 정책은 할인금액을 가진다.
        - 주문 정책은 할인금액만큼 할인금액을 결정한다.
    - 경과일 할인 정책 (ElapsedDayDiscountPolicy)
        - 경과일 정책은 기준 날짜에 대하여 경과한 일수만큼 할인을 적용한다.
        - 경과일 정책은 적용 기준이 되는 기준 날짜를 가진다.
        - 경과일 정책은 기준 단위 할인금액을 가진다.
        - 경과일 정책은 (경과일) * (기준 할인금액)만큼 할인금액을 결정한다.

### 할인 정책 팩토리(DiscountPolicyFactory)

- 할인 정책 팩토리는 현재 존재하는 모든 할인 정책을 가진다.
- 다음 할인 정책이 존재한다.
    - 메뉴타입 정책 : 디저트(2,023원), 메인(2,023원)
    - 주문 정책 : 특별(1,000원)
    - 경과일 정책 : 2023/12/01(1000 + 경과일 * 100원)

## 증정 이벤트(GiveawayEvent)

- 증정 이벤트는 이벤트 이름, 이벤트 기간, 증정 정책, 증정품을 가진다.
- 증정 이벤트는 이벤트 적용 가능 여부를 판정할 수 있다.
    - 이벤트 기간에 포함되는지 검증한다.
    - 증정 정책에 따라 적용 가능한지 검증한다.
- 증정 이벤트가 적용 가능하다면, 주문을 통해 증정품(Giveaway)를 지급한다.
    - 증정품은 메뉴와 수량을 가진다.
    - 증정품의 가치는 메뉴의 가격과 수량을 곱한 금액이다.
- 증정 이벤트의 혜택금액은 증정 메뉴의 가격이다.

### 증정 정책(GiveawayPolicy)

- 증정 정책은 주문을 통해 증정 가능 여부를 판정할 수 있다.
- 증정 정책은 최소 주문금액을 가진다.
- 증정 정책은 적용 가능 여부를 판정할 수 있다.
    - 총 주문금액이 최소 주문금액보다 큰지 검증한다.

### 증정 정책 팩토리(GiveawayPolicyFactory)

- 증정 정책 팩토리는 현재 존재하는 모든 증정 정책을 가진다.
- 다음 증정 정책이 존재한다.
    - 최소 주문금액 : 120,000원

## 이벤트 매니저(EventManager)

- 이벤트 매니저는 이벤트를 관리한다.
- 이벤트 매니저는 이벤트를 등록할 수 있다.
- 이벤트 매니저는 예약정보를 통해 적용 가능한 이벤트를 찾을 수 있다.
- 이벤트 매니저는 적용된 이벤트 결과를 반환할 수 있다.

## 이벤트 배지(EventBadge)

- 이벤트 배지는 이벤트 배지 이름을 가진다.
- 각 배지는 발급 조건을 가진다.
- 발급 조건에 따라 이벤트 배지를 발급할 수 있다.

## 이벤트 플래너(EventPlanner)

- 이벤트 플래너는 입력뷰와 출력뷰를 가진다.
- 이벤트 플래너는 예약 정보를 입력받아 예약 정보를 출력한다.
